{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Traveler Reviews - Nordic Trails</title>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {
      background: url("{% static 'images/lofoten3.jpg' %}") no-repeat center center fixed;
      background-size: cover;
      font-family: 'Poppins', sans-serif;
      margin: 0;
      padding: 0;
      color: #f4e9d8;
    }

    .reviews-container {
      background: rgba(10, 20, 30, 0.9);
      backdrop-filter: blur(5px);
      max-width: 850px;
      margin: 4rem auto;
      padding: 2rem 3rem;
      border-radius: 14px;
      box-shadow: 0 0 20px rgba(0,0,0,0.6);
    }

    h1, h2 {
      text-align: center;
      color: #e0cba8;
      font-family: 'Cinzel Decorative', serif;
    }

    .review-card {
      background-color: rgba(20, 35, 50, 0.9);
      padding: 1rem;
      border-radius: 12px;
      border: 1px solid #c9b37e66;
      box-shadow: 0 3px 6px rgba(0,0,0,0.4);
      margin-bottom: 1rem;
      display: flex;
      align-items: flex-start;
      gap: 1rem;
      color: #eaeaea;
    }

    .review-card img {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      border: 2px solid #c9b37e;
      object-fit: cover;
    }

    .review-details strong {
      color: #e0cba8;
      font-size: 1.1rem;
    }

    .review-details .date {
      color: #a5a5a5;
      font-size: 0.9em;
    }

    .stars {
      color: #f5b301;
      font-size: 1.1rem;
    }

    /* Form section */
    .review-form {
      margin-top: 2rem;
    }

    .review-form label {
      font-weight: 600;
      display: block;
      margin-bottom: 0.3rem;
      color: #e0cba8;
    }

    .review-form select,
    .review-form input[type="number"],
    .review-form textarea {
      width: 100%;
      padding: 0.8rem;
      border-radius: 8px;
      background-color: #102133;
      border: 1px solid #c9b37e;
      color: #fff;
      margin-bottom: 1.2rem;
      font-family: 'Poppins', sans-serif;
      font-size: 1rem;
    }

    .review-form textarea {
      resize: vertical;
      min-height: 120px;
    }

    .review-form button {
      display: block;
      margin: 1.2rem auto 0;
      background-color: #c9b37e;
      border: none;
      color: #0d1b2a;
      font-weight: bold;
      padding: 0.8rem 2.2rem;
      border-radius: 8px;
      cursor: pointer;
      transition: 0.3s ease;
    }

    .review-form button:hover {
      background-color: #e0cba8;
      transform: scale(1.05);
    }

    .no-reviews {
      text-align: center;
      color: #aaa;
      margin-top: 1.5rem;
    }
  </style>
</head>
<body>
  <div style="width:100%;display:flex;justify-content:center;padding:1.2rem 0 0 0;">
  <a href="{% url 'dashboard' %}" style="color:#ffb07c;font-family:'Cinzel Decorative',serif;font-size:1.05rem;font-weight:500;text-decoration:none;padding:0.5rem 1.2rem;border-radius:8px;border:1.5px solid rgba(255,176,124,0.35);background:rgba(16,27,42,0.55);transition:box-shadow 0.2s,color 0.2s;text-shadow:0 0 6px #fff3e0,0 0 2px #ffd8b0;">← Back to Dashboard</a>
  </div>
  <main>
    <div class="reviews-container">
      <h1>Traveler Reviews</h1>
      <p style="text-align:center;">Read what our travelers have to say, or share your own experience below!</p>
      {% if reviews %}
        {% for review in reviews %}
          <div class="review-card">
            <div class="review-details">
              <strong>{{ review.user.username }}</strong>
              <span class="date"> ({{ review.created_at|date:'M d, Y' }})</span><br>
              <span class="stars">
                {% for i in "12345"|slice:":5" %}
                  {% if forloop.counter <= review.rating %}★{% else %}<span style="color:#555;">★</span>{% endif %}
                {% endfor %}
              </span><br>
              <span>{{ review.comment }}</span>
            </div>
          </div>
        {% endfor %}
      {% else %}
        <p class="no-reviews">No reviews yet. Be the first to share your experience!</p>
      {% endif %}

      <hr style="margin:2rem 0; border-color:#c9b37e33;">

      <h2>Write a Review</h2>
      <form method="post" class="review-form">
        {% csrf_token %}
        <label for="id_rating">Rating:</label>
        {{ form.rating }}

        <label for="id_comment">Your Review:</label>
        {{ form.comment }}

        <button type="submit">Submit Review</button>
      </form>
    </div>
  </main>
</body>
</html>
